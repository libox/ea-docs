# 用户类组件详细说明

**方舟分群组件：**可以通过该组件连接到方舟智能分析产品中的已有用户分群，目前可以选择的分群分为以下几类：

* EA 预置分群：包括所有用户、新访问用户
* UBA 用户分群：包括静态分群、动态分群（每天更新一次）

**使用说明：**

* 在每一个 workflow 中，有且只有一个分群组件，每一个分群组件中目前只可选择一个分群（注：在触达活动中可以选择多个分群，这点 workflow 同普通活动有差异）
* 在 workflow 中，分群组件只能作为 flow 的起点，不能作为中间节点和末尾节点
* 对于选定的用户分群，workflow 会执行一次分群数据的快照，拉取到当前状态下最新的分群数据并作为 flow 待执行用户数据集，该动作在 workflow 发布后执行一次

**用户在 workflow 中流转规则：**

因为 workflow 中的用户分群目前只会执行一次数据快照，在用户通过各个节点流转的过程中，遵循以下规则：

1. 用户流转只会单向，不会循环。即已经执行过某一个节点的用户，不会反复执行，目前不支持循环模式
2. 基于规则一，workflow 暂停再开启后，已经执行过某节点的用户会继续向下流转，不会回到起点重新开始
3. 如果在 workflow 执行后，更新了用户分群，同样遵循规则一，新分群和老分群重叠的用户，依然按照现有顺序继续执行，不会回到起点重新开始，只有新增用户从起点开始执行，具体场景包括：
   * 新分群包括的用户，老分群不包括：从起点开始执行
   * 新分群包括的用户，老分群也包括：从当前节点继续执行（原因：策略可能已经下发到 SDK，但是还未执行，目前无法清除已经下发 SDK 的策略）
   * 新分群不包括的用户，老分群包括：从当前节点继续执行（原因：策略可能已经下发到 SDK，但是还未执行，目前无法清除已经下发 SDK 的策略）



